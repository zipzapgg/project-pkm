{% extends "base.html" %}
{% block title %}Tes Rekomendasi Jurusan (Kurmer){% endblock %}

{% block content %}
<div class="card shadow-lg p-4 p-md-5 mx-auto fade-in" style="max-width: 800px;">
  <div class="text-center mb-4">
    <h3 class="fw-bold mb-2">Tes Minat Bakat (Kurikulum Merdeka)</h3>
    <p class="text-muted">Masukkan nilai rata-rata mata pelajaran pilihan kamu.</p>
  </div>

  <form id="tesForm" action="{{ url_for('hasil') }}" method="POST">
    {{ form.hidden_tag() }}

    <div class="mb-4 p-4 rounded-4 bg-light border">
      <h5 class="fw-bold text-primary mb-3">üë§ Data Diri</h5>
      <div class="row g-3">
        <div class="col-md-6">{{ form.nama.label(class="form-label") }} {{ form.nama(class="form-control", id="nama") }}</div>
        <div class="col-md-6">{{ form.nisn.label(class="form-label") }} {{ form.nisn(class="form-control", id="nisn") }}</div>
      </div>
    </div>

    <div class="mb-4 p-4 rounded-4 bg-light border">
      <h5 class="fw-bold text-success mb-3">üìö Nilai Akademik (0-100)</h5>
      <div class="row g-3">
        <div class="col-md-4">{{ form.mtk.label(class="form-label") }} {{ form.mtk(class="form-control", id="mtk") }}</div>
        <div class="col-md-4">{{ form.bindo.label(class="form-label") }} {{ form.bindo(class="form-control", id="bindo") }}</div>
        <div class="col-md-4">{{ form.bing.label(class="form-label") }} {{ form.bing(class="form-control", id="bing") }}</div>
        
        <div class="col-12"><hr></div>
        
        <div class="col-md-6">
            <label class="form-label fw-bold text-danger">üî¨ Rata-rata Mapel Sains</label>
            <div class="form-text mb-2">Gabungan Fisika, Kimia, Biologi (Isi 0 jika tidak ambil)</div>
            {{ form.nilai_sains(class="form-control border-danger", id="sains") }}
        </div>
        <div class="col-md-6">
            <label class="form-label fw-bold text-warning">‚öñÔ∏è Rata-rata Mapel Sosial</label>
            <div class="form-text mb-2">Gabungan Ekonomi, Sosiologi, Geografi (Isi 0 jika tidak ambil)</div>
            {{ form.nilai_sosial(class="form-control border-warning", id="sosial") }}
        </div>
      </div>
    </div>

    <div class="mb-4 p-4 rounded-4 bg-light border">
      <h5 class="fw-bold text-info mb-3">‚ù§Ô∏è Skala Minat (1-5)</h5>
      <div class="row g-3">
        <div class="col-6">{{ form.minat_logika.label }} {{ form.minat_logika(class="form-range", type="range", min="1", max="5", id="log") }}</div>
        <div class="col-6">{{ form.minat_sosial.label }} {{ form.minat_sosial(class="form-range", type="range", min="1", max="5", id="sos") }}</div>
        <div class="col-6">{{ form.minat_kreatif.label }} {{ form.minat_kreatif(class="form-range", type="range", min="1", max="5", id="kre") }}</div>
        <div class="col-6">{{ form.minat_bahasa.label }} {{ form.minat_bahasa(class="form-range", type="range", min="1", max="5", id="bah") }}</div>
      </div>
    </div>

    <div class="text-center mt-4">
      <button type="button" onclick="isiRandom()" class="btn btn-warning me-2">üé≤ Randomizer</button>
      <button type="submit" class="btn btn-primary px-5">Lihat Hasil</button>
    </div>
  </form>
</div>

<script>
function isiRandom() {
    document.getElementById('nama').value = "Siswa " + Math.floor(Math.random()*1000);
    document.getElementById('nisn').value = "999" + Math.floor(Math.random()*100000);
    
    // Tipe Acak: 0=Saintek, 1=Soshum, 2=Campuran
    let tipe = Math.random();
    
    if (tipe < 0.33) { // Saintek
        document.getElementById('mtk').value = 90;
        document.getElementById('sains').value = 95; // Ambil Sains
        document.getElementById('sosial').value = 0; // Gak ambil Sosial
    } else if (tipe < 0.66) { // Soshum
        document.getElementById('mtk').value = 70;
        document.getElementById('sains').value = 0;
        document.getElementById('sosial').value = 92;
    } else { // Lintas Minat
        document.getElementById('mtk').value = 85;
        document.getElementById('sains').value = 80;
        document.getElementById('sosial').value = 80;
    }
    
    document.getElementById('bindo').value = 80;
    document.getElementById('bing').value = 80;
    
    ['log','sos','kre','bah'].forEach(id => document.getElementById(id).value = Math.floor(1 + Math.random()*5));
}
</script>
{% endblock %}